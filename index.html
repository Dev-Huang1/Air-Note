<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easy Notes | Your private notes</title>
    <link rel="icon" href="assets/images/Easy-Notes-Logo.png" type="image/x-icon">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: ('https://www.tech-huang.us.kg/assets/images/banner/R.jpeg');
            background-repeat: no-repeat;
        }

        #notes-list {
            padding: 20px;
        }

        #notes-list h1 {
            text-align: center;
        }

        #notes-list ul {
            list-style-type: none;
            padding: 0;
        }

        #notes-list li {
            background: white;
            margin: 10px 0;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
        }

        #add-note-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #0066ff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 30px;
            cursor: pointer;
        }

        #note-editor {
            padding: 20px;
        }

        #note-title {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            box-sizing: border-box;
        }

        #note-content {
            width: 100%;
            height: 400px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            box-sizing: border-box;
        }

        #editor-toolbar {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
}

#editor-toolbar > div,
#editor-toolbar > button {
    flex: 1;
    margin: 5px;
}

#editor-toolbar input[type="file"] {
    display: none;
}

#save-note-btn,
#back-to-list-main,
#editor-toolbar button {
    background-color: #0066ff;
    color: white;
    border: none;
    border-radius: 20px;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    margin: 5px 0;
}

#note-category {
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 20px;
    font-size: 16px;
    margin-left: 5px;
}

@media (max-width: 768px) {
    #editor-toolbar {
        flex-direction: column;
        align-items: stretch;
    }

    #editor-toolbar > div,
    #editor-toolbar > button {
        flex: none;
        margin: 10px 0;
        width: 100%;
    }

    #save-note-btn,
    #back-to-list-main,
    #editor-toolbar button {
        padding: 10px;
        font-size: 14px;
        width: 100%;
    }

    #note-category {
        width: 100%;
        margin-left: 0;
    }
}

        .note-actions {
            margin-top: 10px;
        }

        .note-actions button {
            margin-right: 5px;
            padding: 10px 20px;
            cursor: pointer;
            background-color: #0066ff;
            color: white;
            border: none;
            border-radius: 20px;
        }

        #delete-confirm {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            display: none;
            width: 30%;
        }

        @media (max-width: 768px) {
            #delete-confirm {
                width: 65%;
            }
        }

        #delete-confirm p {
            margin-bottom: 20px;
        }

        #delete-confirm button {
            background-color: #0066ff;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            cursor: pointer;
            margin-right: 10px;
        }

        #delete-confirm button.cancel {
            background-color: #999;
        }

        #search-bar {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            box-sizing: border-box;
        }

        .category-tag {
    padding: 2px 8px;
    margin-right: 5px;
    border-radius: 3px;
    font-size: 12px;
    color: white; /* Text color for all categories */
}

.category-work {
    background-color: #0066ff; /* Blue for Work */
}

.category-personal {
    background-color: #66cc66; /* Light green for Personal */
}

.category-learn {
    background-color: #ffd700; /* Light yellow for Learn */
}


        .note-preview {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #note-detail {
            display: none;
            padding: 20px;
            background-color: white;
            border-radius: 5px;
            margin-top: 20px;
        }

        #note-detail h2 {
            margin-top: 0;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        .image-preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .image-preview {
            position: relative;
            display: inline-block;
        }

        .image-preview img {
            max-width: 150px;
            height: auto;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .delete-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: red;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .draggable {
            cursor: move;
        }
    </style>
</head>
<body>
    <div id="notes-list">
        <h1>Easy Notes</h1>
        <input type="text" id="search-bar" placeholder="Search Notes">
        <ul id="notes"></ul>
        <button id="add-note-btn">+</button>
    </div>
    <div id="note-editor" style="display: none;">
        <input type="text" id="note-title" placeholder="Note Title">
        <textarea id="note-content"></textarea>
        <div id="image-previews" class="image-preview-container"></div>
        <div id="editor-toolbar">
            <div>
                <input type="file" id="file-input" multiple>
                <button onclick="document.getElementById('file-input').click()">Upload</button>
            </div>
            <select id="note-category">                
                <option value="">Choose category</option>                
                <option value="Work">Work</option>                
                <option value="Personal">Personal</option>                
                <option value="Learn">Learn</option>            
            </select>
            <button id="save-note-btn">Save</button>
        </div>
        <button id="back-to-list-main">Back to List</button>
    </div>
    <div id="delete-confirm">
        <p>Are you sure you want to delete this note?</p>
        <button id="confirm-delete">Delete</button>
        <button class="cancel">Cancel</button>
    </div>
    <div id="note-detail">
        <h2 id="detail-title"></h2>
        <div id="detail-content"></div>
        <div class="note-actions">
            <button id="edit-note">Edit</button>
            <button id="delete-note">Delete</button>
            <button id="back-to-list">Back to List</button>
        </div>
    </div>
    <div id="cookie-consent" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; flex-direction: column; text-align: center; border-radius: 20px;">
        <p style="color: white; font-size: 24px; padding: 20px;">This website uses cookies to store your notes. Please consent to cookies to continue using the website.</p>
        <button id="accept-cookies" style="margin: 20px; padding: 10px 20px; font-size: 20px; cursor: pointer;">Accept Cookies</button>
    </div>

    <script>
        // Check if cookies are enabled and user has accepted cookies
        if (!navigator.cookieEnabled || !getCookie('cookies_accepted')) {
            document.getElementById('cookie-consent').style.display = 'flex';
        }

        // Function to get a cookie by name
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // Event listener for cookie acceptance
        document.getElementById('accept-cookies').addEventListener('click', function() {
            document.cookie = 'cookies_accepted=true; path=/';
            document.getElementById('cookie-consent').style.display = 'none';
            location.reload();
        });

        // Function to set a cookie
        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days*24*60*60*1000));
            const expires = "expires="+ d.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
        }

        // Note management logic
        let notes = [];

        // Function to save notes to cookies
        function saveNotes() {
            if (!navigator.cookieEnabled || !getCookie('cookies_accepted')) {
                alert('Cookies are required to save notes.');
                return;
            }
            setCookie('notes', JSON.stringify(notes), 365);
        }

        // Function to load notes from cookies
        function loadNotes() {
            const savedNotes = getCookie('notes');
            if (savedNotes) {
                notes = JSON.parse(savedNotes);
                renderNotes();
            }
        }

        // Function to render notes list
        function renderNotes() {
            const notesList = document.getElementById('notes');
            notesList.innerHTML = '';
            notes.forEach((note, index) => {
                const li = document.createElement('li');
                li.textContent = note.title;
                li.dataset.index = index;
                li.addEventListener('click', () => showNoteDetail(index));
                notesList.appendChild(li);
            });
        }

        // Event listeners for add note button
        document.getElementById('add-note-btn').addEventListener('click', () => {
            document.getElementById('notes-list').style.display = 'none';
            document.getElementById('note-editor').style.display = 'block';
        });

        // Event listeners for save note button
        document.getElementById('save-note-btn').addEventListener('click', () => {
            const title = document.getElementById('note-title').value;
            const content = document.getElementById('note-content').value;
            const category = document.getElementById('note-category').value;
            if (title && content) {
                notes.push({ title, content, category });
                saveNotes();
                document.getElementById('note-title').value = '';
                document.getElementById('note-content').value = '';
                document.getElementById('note-category').value = '';
                document.getElementById('note-editor').style.display = 'none';
                document.getElementById('notes-list').style.display = 'block';
                renderNotes();
            } else {
                alert('Title and content are required.');
            }
        });

        // Event listeners for back to list button
        document.getElementById('back-to-list-main').addEventListener('click', () => {
            document.getElementById('note-editor').style.display = 'none';
            document.getElementById('notes-list').style.display = 'block';
        });

        // Event listeners for back to list button in detail view
        document.getElementById('back-to-list').addEventListener('click', () => {
            document.getElementById('note-detail').style.display = 'none';
            document.getElementById('notes-list').style.display = 'block';
        });

        // Function to show note detail
        function showNoteDetail(index) {
            const note = notes[index];
            document.getElementById('detail-title').textContent = note.title;
            document.getElementById('detail-content').innerHTML = note.content;
            document.getElementById('note-detail').style.display = 'block';
            document.getElementById('notes-list').style.display = 'none';
            document.getElementById('edit-note').dataset.index = index;
            document.getElementById('delete-note').dataset.index = index;
        }

        // Event listeners for edit note button
        document.getElementById('edit-note').addEventListener('click', (event) => {
            const index = event.target.dataset.index;
            const note = notes[index];
            document.getElementById('note-title').value = note.title;
            document.getElementById('note-content').value = note.content;
            document.getElementById('note-category').value = note.category;
            document.getElementById('note-detail').style.display = 'none';
            document.getElementById('note-editor').style.display = 'block';
            notes.splice(index, 1);
        });

        // Event listeners for delete note button
        document.getElementById('delete-note').addEventListener('click', (event) => {
            const index = event.target.dataset.index;
            document.getElementById('delete-confirm').style.display = 'block';
            document.getElementById('confirm-delete').dataset.index = index;
        });

        // Event listeners for delete confirm button
        document.getElementById('confirm-delete').addEventListener('click', (event) => {
            const index = event.target.dataset.index;
            notes.splice(index, 1);
            saveNotes();
            document.getElementById('delete-confirm').style.display = 'none';
            document.getElementById('note-detail').style.display = 'none';
            document.getElementById('notes-list').style.display = 'block';
            renderNotes();
        });

        // Event listeners for cancel delete button
        document.querySelector('#delete-confirm .cancel').addEventListener('click', () => {
            document.getElementById('delete-confirm').style.display = 'none';
        });

        // Event listener for search bar
        document.getElementById('search-bar').addEventListener('input', (event) => {
            const query = event.target.value.toLowerCase();
            const filteredNotes = notes.filter(note => note.title.toLowerCase().includes(query));
            renderFilteredNotes(filteredNotes);
        });

        // Function to render filtered notes
        function renderFilteredNotes(filteredNotes) {
            const notesList = document.getElementById('notes');
            notesList.innerHTML = '';
            filteredNotes.forEach((note, index) => {
                const li = document.createElement('li');
                li.textContent = note.title;
                li.dataset.index = index;
                li.addEventListener('click', () => showNoteDetail(index));
                notesList.appendChild(li);
            });
        }

        // Load notes on page load
        loadNotes();
    </script>
</body>
</html>
